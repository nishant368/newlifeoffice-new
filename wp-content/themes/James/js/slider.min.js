(function(f){var e=new Array;var c=new Array;var m=new Array;var o=new Array;var d=new Array;var h=new Array;var b=new Array;var g=new Array;var n=new Array;var a=new Array;var l=new Array;f.fn.coinslider=f.fn.CoinSlider=function(p){init=function(q){c[q.id]=new Array();m[q.id]=new Array();o[q.id]=new Array();d[q.id]=new Array();h[q.id]=new Array();g[q.id]=0;a[q.id]=0;l[q.id]=1;e[q.id]=f.extend({},f.fn.coinslider.defaults,p);f.each(f("#"+q.id+" img"),function(r,s){m[q.id][r]=f(s).attr("src");o[q.id][r]=f(s).parent().is("a")?f(s).parent().attr("href"):"";d[q.id][r]=f(s).parent().is("a")?f(s).parent().attr("target"):"";h[q.id][r]=f(s).next().is("span")?f(s).next().html():"";f(s).hide();f(s).next().hide()});f(q).css({"background-image":"url("+m[q.id][0]+")",width:e[q.id].width,height:e[q.id].height,position:"relative","background-position":"top left"}).wrap("<div class='coin-slider' id='coin-slider-"+q.id+"' />");f("#"+q.id).append("<div class='cs-title' id='cs-title-"+q.id+"' style='position: absolute; bottom:0; left: 0; z-index: 1000;'></div>");f.setFields(q);if(e[q.id].navigation){f.setNavigation(q)}f.transition(q,0);f.transitionCall(q)};f.setFields=function(q){tWidth=sWidth=parseInt(e[q.id].width/e[q.id].spw);tHeight=sHeight=parseInt(e[q.id].height/e[q.id].sph);counter=sLeft=sTop=0;tgapx=gapx=e[q.id].width-e[q.id].spw*sWidth;tgapy=gapy=e[q.id].height-e[q.id].sph*sHeight;for(i=1;i<=e[q.id].sph;i++){f(".wp-post-image").css({"margin-top":"-21px"});gapx=tgapx;if(gapy>0){gapy--;sHeight=tHeight+1}else{sHeight=tHeight}for(j=1;j<=e[q.id].spw;j++){if(gapx>0){gapx--;sWidth=tWidth+1}else{sWidth=tWidth}c[q.id][counter]=i+""+j;counter++;if(e[q.id].links){f("#"+q.id).append("<a href='"+o[q.id][0]+"' class='cs-"+q.id+"' id='cs-"+q.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></a>")}else{f("#"+q.id).append("<div class='cs-"+q.id+"' id='cs-"+q.id+i+j+"' style='width:"+sWidth+"px; height:"+sHeight+"px; float: left; position: absolute;'></div>")}f("#cs-"+q.id+i+j).css({"background-position":-sLeft+"px "+(-sTop+"px"),left:sLeft,top:sTop});sLeft+=sWidth}sTop+=sHeight;sLeft=0}f(".cs-"+q.id).mouseover(function(){f("#cs-navigation-"+q.id).show()});f(".cs-"+q.id).mouseout(function(){f("#cs-navigation-"+q.id).hide()});f("#cs-title-"+q.id).mouseover(function(){f("#cs-navigation-"+q.id).show()});f("#cs-title-"+q.id).mouseout(function(){f("#cs-navigation-"+q.id).hide()});if(e[q.id].hoverPause){f(".cs-"+q.id).mouseover(function(){e[q.id].pause=true});f(".cs-"+q.id).mouseout(function(){e[q.id].pause=false});f("#cs-title-"+q.id).mouseover(function(){e[q.id].pause=true});f("#cs-title-"+q.id).mouseout(function(){e[q.id].pause=false})}};f.transitionCall=function(q){clearInterval(b[q.id]);delay=e[q.id].delay+e[q.id].spw*e[q.id].sph*e[q.id].sDelay;b[q.id]=setInterval(function(){f.transition(q)},delay)};f.transition=function(q,r){if(e[q.id].pause==true){return}f.effect(q);a[q.id]=0;n[q.id]=setInterval(function(){f.appereance(q,c[q.id][a[q.id]])},e[q.id].sDelay);f(q).css({"background-image":"url("+m[q.id][g[q.id]]+")"});if(typeof(r)=="undefined"){g[q.id]++}else{if(r=="prev"){g[q.id]--}else{g[q.id]=r}}if(g[q.id]==m[q.id].length){g[q.id]=0}if(g[q.id]==-1){g[q.id]=m[q.id].length-1}f(".cs-button-"+q.id).removeClass("cs-active");f("#cs-button-"+q.id+"-"+(g[q.id]+1)).addClass("cs-active");if(h[q.id][g[q.id]]){f("#cs-title-"+q.id).css({opacity:0}).animate({opacity:e[q.id].opacity},e[q.id].titleSpeed);f("#cs-title-"+q.id).html(h[q.id][g[q.id]])}else{f("#cs-title-"+q.id).css("opacity",0)}};f.appereance=function(r,q){f(".cs-"+r.id).attr("href",o[r.id][g[r.id]]).attr("target",d[r.id][g[r.id]]);if(a[r.id]==e[r.id].spw*e[r.id].sph){clearInterval(n[r.id]);return}f("#cs-"+r.id+q).css({opacity:0,"background-image":"url("+m[r.id][g[r.id]]+")"});f("#cs-"+r.id+q).animate({opacity:1},300);a[r.id]++};f.setNavigation=function(q){f(q).append("<div id='cs-navigation-"+q.id+"'></div>");f("#cs-navigation-"+q.id).hide();f("#cs-prev-"+q.id).css({position:"absolute",top:e[q.id].height/2-15,left:0,"z-index":1001,"line-height":"30px",opacity:e[q.id].opacity}).click(function(r){r.preventDefault();f.transition(q,"prev");f.transitionCall(q)}).mouseover(function(){f("#cs-navigation-"+q.id).show()});f("#cs-next-"+q.id).css({position:"absolute",top:e[q.id].height/2-15,right:0,"z-index":1001,"line-height":"30px",opacity:e[q.id].opacity}).click(function(r){r.preventDefault();f.transition(q);f.transitionCall(q)}).mouseover(function(){f("#cs-navigation-"+q.id).show()});f("<div id='cs-buttons-"+q.id+"' class='cs-buttons'></div>").appendTo(f("#coin-slider-"+q.id+""));for(k=1;k<m[q.id].length+1;k++){f("#cs-buttons-"+q.id).append("<a href='#' class='cs-button-"+q.id+"' id='cs-button-"+q.id+"-"+k+"'>"+k+"</a>")}f.each(f(".cs-button-"+q.id),function(r,s){f(s).click(function(t){f(".cs-button-"+q.id).removeClass("cs-active");f(this).addClass("cs-active");t.preventDefault();f.transition(q,r);f.transitionCall(q)})});f("#cs-navigation-"+q.id+" a").mouseout(function(){f("#cs-navigation-"+q.id).hide();e[q.id].pause=false});f("#cs-buttons-"+q.id).css({left:"50%","margin-left":-m[q.id].length*15/2-5,position:"absolute"})};f.effect=function(q){effA=["random","swirl","rain","straight"];if(e[q.id].effect==""){eff=effA[Math.floor(Math.random()*(effA.length))]}else{eff=e[q.id].effect}c[q.id]=new Array();if(eff=="random"){counter=0;for(i=1;i<=e[q.id].sph;i++){for(j=1;j<=e[q.id].spw;j++){c[q.id][counter]=i+""+j;counter++}}f.random(c[q.id])}if(eff=="rain"){f.rain(q)}if(eff=="swirl"){f.swirl(q)}if(eff=="straight"){f.straight(q)}l[q.id]*=-1;if(l[q.id]>0){c[q.id].reverse()}};f.random=function(q){var s=q.length;if(s==0){return false}while(--s){var r=Math.floor(Math.random()*(s+1));var u=q[s];var t=q[r];q[s]=t;q[r]=u}};f.swirl=function(q){var s=e[q.id].sph;var t=e[q.id].spw;var A=1;var z=1;var r=0;var u=0;var w=0;var v=true;while(v){u=(r==0||r==2)?t:s;for(i=1;i<=u;i++){c[q.id][w]=A+""+z;w++;if(i!=u){switch(r){case 0:z++;break;case 1:A++;break;case 2:z--;break;case 3:A--;break}}}r=(r+1)%4;switch(r){case 0:t--;z++;break;case 1:s--;A++;break;case 2:t--;z--;break;case 3:s--;A--;break}check=f.max(s,t)-f.min(s,t);if(t<=check&&s<=check){v=false}}};f.rain=function(s){var v=e[s.id].sph;var q=e[s.id].spw;var u=0;var t=to2=from=1;var r=true;while(r){for(i=from;i<=t;i++){c[s.id][u]=i+""+parseInt(to2-i+1);u++}to2++;if(t<v&&to2<q&&v<q){t++}if(t<v&&v>=q){t++}if(to2>q){from++}if(from>t){r=false}}};f.straight=function(q){counter=0;for(i=1;i<=e[q.id].sph;i++){for(j=1;j<=e[q.id].spw;j++){c[q.id][counter]=i+""+j;counter++}}};f.min=function(r,q){if(r>q){return q}else{return r}};f.max=function(r,q){if(r<q){return q}else{return r}};this.each(function(){init(this)})};f.fn.coinslider.defaults={width:620,height:290,spw:7,sph:5,delay:3000,sDelay:30,opacity:0.7,titleSpeed:500,effect:"",navigation:true,links:true,hoverPause:true}})(jQuery);(function(b){if(!document.defaultView||!document.defaultView.getComputedStyle){var d=b.curCSS;b.curCSS=function(g,e,h){if(e==="background-position"){e="backgroundPosition"}if(e!=="backgroundPosition"||!g.currentStyle||g.currentStyle[e]){return d.apply(this,arguments)}var f=g.style;if(!h&&f&&f[e]){return f[e]}return d(g,"backgroundPositionX",h)+" "+d(g,"backgroundPositionY",h)}}var c=b.fn.animate;b.fn.animate=function(e){if("background-position" in e){e.backgroundPosition=e["background-position"];delete e["background-position"]}if("backgroundPosition" in e){e.backgroundPosition="("+e.backgroundPosition}return c.apply(this,arguments)};function a(f){f=f.replace(/left|top/g,"0px");f=f.replace(/right|bottom/g,"100%");f=f.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var e=f.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(e[1],10),e[2],parseFloat(e[3],10),e[4]]}b.fx.step.backgroundPosition=function(f){if(!f.bgPosReady){var h=b.curCSS(f.elem,"backgroundPosition");if(!h){h="0px 0px"}h=a(h);f.start=[h[0],h[2]];var e=a(f.end);f.end=[e[0],e[2]];f.unit=[e[1],e[3]];f.bgPosReady=true}var g=[];g[0]=((f.end[0]-f.start[0])*f.pos)+f.start[0]+f.unit[0];g[1]=((f.end[1]-f.start[1])*f.pos)+f.start[1]+f.unit[1];f.elem.style.backgroundPosition=g[0]+" "+g[1]}})(jQuery);(function(b){b(document).ready(function(){imgP=$(".hiddenLink").html();b("body").prepend("").prepend("")});b.supersized=function(a){var C={slideshow:1,autoplay:1,start_slide:1,slide_interval:5000,transition:1,transition_speed:750,new_window:1,pause_hover:0,keyboard_nav:1,performance:1,image_protect:1,image_path:imgP,min_width:0,min_height:0,vertical_center:1,horizontal_center:1,fit_portrait:0,fit_landscape:0,navigation:1,thumbnail_navigation:0,slide_counter:1,slide_captions:1};var w=b("#supersized");var B="#pauseplay";if(a){var a=b.extend(C,a)}else{var a=b.extend(C)}var D=false;var t=false;var u=a.image_path;if(a.start_slide){var v=a.start_slide-1}else{var v=Math.floor(Math.random()*a.slides.length)}var p=a.new_window?' target="_blank"':"";if(a.performance==3){w.addClass("speed")}else{if((a.performance==1)||(a.performance==2)){w.addClass("quality")}}if(a.slides.length>1){v-1<0?loadPrev=a.slides.length-1:loadPrev=v-1;var A=(a.slides[loadPrev].url)?"href='"+a.slides[loadPrev].url+"'":"";b("<img/>").attr("src",a.slides[loadPrev].image).appendTo(w).wrap("<a "+A+p+"></a>")}A=(a.slides[v].url)?"href='"+a.slides[v].url+"'":"";b("<img/>").attr("src",a.slides[v].image).appendTo(w).wrap('<a class="activeslide" '+A+p+"></a>");if(a.slides.length>1){v==a.slides.length-1?loadNext=0:loadNext=v+1;A=(a.slides[loadNext].url)?"href='"+a.slides[loadNext].url+"'":"";b("<img/>").attr("src",a.slides[loadNext].image).appendTo(w).wrap("<a "+A+p+"></a>")}w.hide();b("#controls-wrapper").hide();b(window).load(function(){b("#supersized-loader").hide();w.fadeIn("fast");b("#controls-wrapper").show();if(a.thumbnail_navigation){v-1<0?prevThumb=a.slides.length-1:prevThumb=v-1;b("#prevthumb").show().html(b("<img/>").attr("src",a.slides[prevThumb].image));v==a.slides.length-1?nextThumb=0:nextThumb=v+1;b("#nextthumb").show().html(b("<img/>").attr("src",a.slides[nextThumb].image))}q();if(a.slide_captions){b("#slidecaption").html(a.slides[v].title)}if(!(a.navigation)){b("#navigation").hide()}if(a.slideshow&&a.slides.length>1){if(a.slide_counter){b("#slidecounter .slidenumber").html(v+1);b("#slidecounter .totalslides").html(a.slides.length)}slideshow_interval=setInterval(s,a.slide_interval);if(!(a.autoplay)){clearInterval(slideshow_interval);t=true;if(b(B).attr("src")){b(B).attr("src",u+"play_dull.png")}}if(a.thumbnail_navigation){b("#nextthumb").click(function(){if(D){return false}clearInterval(slideshow_interval);s(w,a);if(!(t)){slideshow_interval=setInterval(s,a.slide_interval)}return false});b("#prevthumb").click(function(){if(D){return false}clearInterval(slideshow_interval);z(w,a);if(!(t)){slideshow_interval=setInterval(s,a.slide_interval)}return false})}if(a.navigation){b("#navigation a").click(function(){b(this).blur();return false});b("#nextslide").click(function(){if(D){return false}clearInterval(slideshow_interval);s();if(!(t)){slideshow_interval=setInterval(s,a.slide_interval)}return false});if(b("#nextslide").attr("src")){b("#nextslide").mousedown(function(){b(this).attr("src",u+"forward.png")});b("#nextslide").mouseup(function(){b(this).attr("src",u+"forward_dull.png")});b("#nextslide").mouseout(function(){b(this).attr("src",u+"forward_dull.png")})}b("#prevslide").click(function(){if(D){return false}clearInterval(slideshow_interval);z();if(!(t)){slideshow_interval=setInterval(s,a.slide_interval)}return false});if(b("#prevslide").attr("src")){b("#prevslide").mousedown(function(){b(this).attr("src",u+"back.png")});b("#prevslide").mouseup(function(){b(this).attr("src",u+"back_dull.png")});b("#prevslide").mouseout(function(){b(this).attr("src",u+"back_dull.png")})}b(B).click(function(){if(D){return false}if(t){if(b(B).attr("src")){b(B).attr("src",u+"pause_dull.png")}t=false;slideshow_interval=setInterval(s,a.slide_interval)}else{if(b(B).attr("src")){b(B).attr("src",u+"play_dull.png")}clearInterval(slideshow_interval);t=true}return false})}}});if(a.keyboard_nav){b(document.documentElement).keydown(function(c){if((c.keyCode==37)||(c.keyCode==40)){if(b("#prevslide").attr("src")){b("#prevslide").attr("src",u+"back.png")}}else{if((c.keyCode==39)||(c.keyCode==38)){if(b("#nextslide").attr("src")){b("#nextslide").attr("src",u+"forward.png")}}}});b(document.documentElement).keyup(function(c){clearInterval(slideshow_interval);if((c.keyCode==37)||(c.keyCode==40)){if(b("#prevslide").attr("src")){b("#prevslide").attr("src",u+"back_dull.png")}if(D){return false}clearInterval(slideshow_interval);z();if(!(t)){slideshow_interval=setInterval(s,a.slide_interval)}return false}else{if((c.keyCode==39)||(c.keyCode==38)){if(b("#nextslide").attr("src")){b("#nextslide").attr("src",u+"forward_dull.png")}if(D){return false}clearInterval(slideshow_interval);s();if(!(t)){slideshow_interval=setInterval(s,a.slide_interval)}return false}else{if(c.keyCode==32){if(D){return false}if(t){if(b(B).attr("src")){b(B).attr("src",u+"pause_dull.png")}t=false;slideshow_interval=setInterval(s,a.slide_interval)}else{if(b(B).attr("src")){b(B).attr("src",u+"play_dull.png")}t=true}return false}}}})}if(a.slideshow&&a.pause_hover){b(w).hover(function(){if(D){return false}if(!(t)&&a.navigation){if(b(B).attr("src")){b(B).attr("src",u+"pause.png")}clearInterval(slideshow_interval)}},function(){if(!(t)&&a.navigation){if(b(B).attr("src")){b(B).attr("src",u+"pause_dull.png")}slideshow_interval=setInterval(s,a.slide_interval)}})}b(window).resize(function(){q()});function q(){return w.each(function(){var c=b("img",w);b(c).each(function(){var f=(b(this).height()/b(this).width()).toFixed(2);var g=b(window).width();var e=b(window).height();var d;if((e>a.min_height)||(g>a.min_width)){if((e/g)>f){if(a.fit_landscape&&f<=1){b(this).width(g);b(this).height(g*f)}else{b(this).height(e);b(this).width(e/f)}}else{if(a.fit_portrait&&f>1){b(this).height(e);b(this).width(e/f)}else{b(this).width(g);b(this).height(g*f)}}}if(a.horizontal_center){b(this).css("left",(g-b(this).width())/2)}if(a.vertical_center){b(this).css("top",(e-b(this).height())/2)}});if(a.image_protect){b("img",w).bind("contextmenu",function(){return false});b("img",w).bind("mousedown",function(){return false})}return false})}function s(){if(D){return false}else{D=true}var d=a.slides;var e=w.find(".activeslide");e.removeClass("activeslide");if(e.length==0){e=w.find("a:last")}var f=e.next().length?e.next():w.find("a:first");var c=f.prev().length?f.prev():w.find("a:last");b(".prevslide").removeClass("prevslide");c.addClass("prevslide");v+1==d.length?v=0:v++;if(a.performance==1){w.removeClass("quality").addClass("speed")}loadSlide=false;v==d.length-1?loadSlide=0:loadSlide=v+1;A=(a.slides[loadSlide].url)?"href='"+a.slides[loadSlide].url+"'":"";b("<img/>").attr("src",a.slides[loadSlide].image).appendTo(w).wrap("<a "+A+p+"></a>");if(a.thumbnail_navigation==1){v-1<0?prevThumb=d.length-1:prevThumb=v-1;b("#prevthumb").html(b("<img/>").attr("src",a.slides[prevThumb].image));nextThumb=loadSlide;b("#nextthumb").html(b("<img/>").attr("src",a.slides[nextThumb].image))}e.prev().remove();if(a.slide_counter){b("#slidecounter .slidenumber").html(v+1)}if(a.slide_captions){(a.slides[v].title)?b("#slidecaption").html(a.slides[v].title):b("#slidecaption").html("")}f.hide().addClass("activeslide");switch(a.transition){case 0:f.show();D=false;break;case 1:f.fadeTo(a.transition_speed,1,function(){r()});break;case 2:f.animate({top:-b(window).height()},0).show().animate({top:0},a.transition_speed,function(){r()});break;case 3:f.animate({left:b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});break;case 4:f.animate({top:b(window).height()},0).show().animate({top:0},a.transition_speed,function(){r()});break;case 5:f.animate({left:-b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});break;case 6:f.animate({left:b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});e.animate({left:-b(window).width()},a.transition_speed);break;case 7:f.animate({left:-b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});e.animate({left:b(window).width()},a.transition_speed);break}}function z(){if(D){return false}else{D=true}var d=a.slides;var e=w.find(".activeslide");e.removeClass("activeslide");if(e.length==0){e=b(w).find("a:first")}var f=e.prev().length?e.prev():b(w).find("a:last");var c=f.next().length?f.next():b(w).find("a:first");b(".prevslide").removeClass("prevslide");c.addClass("prevslide");v==0?v=d.length-1:v--;if(a.performance==1){w.removeClass("quality").addClass("speed")}loadSlide=false;v-1<0?loadSlide=d.length-1:loadSlide=v-1;A=(a.slides[loadSlide].url)?"href='"+a.slides[loadSlide].url+"'":"";b("<img/>").attr("src",a.slides[loadSlide].image).prependTo(w).wrap("<a "+A+p+"></a>");if(a.thumbnail_navigation==1){prevThumb=loadSlide;b("#prevthumb").html(b("<img/>").attr("src",a.slides[prevThumb].image));v==d.length-1?nextThumb=0:nextThumb=v+1;b("#nextthumb").html(b("<img/>").attr("src",a.slides[nextThumb].image))}e.next().remove();if(a.slide_counter){b("#slidecounter .slidenumber").html(v+1)}if(a.slide_captions){(a.slides[v].title)?b("#slidecaption").html(a.slides[v].title):b("#slidecaption").html("")}f.hide().addClass("activeslide");switch(a.transition){case 0:f.show();D=false;break;case 1:f.fadeTo(a.transition_speed,1,function(){r()});break;case 2:f.animate({top:b(window).height()},0).show().animate({top:0},a.transition_speed,function(){r()});break;case 3:f.animate({left:-b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});break;case 4:f.animate({top:-b(window).height()},0).show().animate({top:0},a.transition_speed,function(){r()});break;case 5:f.animate({left:b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});break;case 6:f.animate({left:-b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});e.animate({left:b(window).width()},a.transition_speed);break;case 7:f.animate({left:b(window).width()},0).show().animate({left:0},a.transition_speed,function(){r()});e.animate({left:-b(window).width()},a.transition_speed);break}}function r(){D=false;if(a.performance==1){w.removeClass("speed").addClass("quality")}q()}}})(jQuery);(function(H,G,F){var E=function(){function c(a,o){o=o||document.documentElement;var n=o.style,m;if(typeof n[a]=="string"){return a}a=a.charAt(0).toUpperCase()+a.slice(1);for(var l=0,h=d.length;l<h;l++){m=d[l]+a;if(typeof n[m]=="string"){return m}}}var d=["Moz","Webkit","Khtml","O","Ms"];return c}(),D=E("transform"),C=document.documentElement,B=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),A=[{name:"csstransforms",getResult:function(){return !!D}},{name:"csstransforms3d",getResult:function(){var f=!!E("perspective");if(f){var d=document.createElement("style"),h=document.createElement("div"),g="@media ("+B.join("transform-3d),(")+"modernizr)";d.textContent=g+"{#modernizr{height:3px}}",(document.head||document.getElementsByTagName("head")[0]).appendChild(d),h.id="modernizr",C.appendChild(h),f=h.offsetHeight===3,d.parentNode.removeChild(d),h.parentNode.removeChild(h)}return !!f}},{name:"csstransitions",getResult:function(){return !!E("transitionProperty")}}],z,w=A.length;if(H.Modernizr){for(z=0;z<w;z++){var v=A[z];Modernizr.hasOwnProperty(v.name)||Modernizr.addTest(v.name,v.getResult)}}else{H.Modernizr=function(){var g={_version:"1.6ish: miniModernizr for Isotope"},f=[],m,l,h;for(z=0;z<w;z++){m=A[z],l=m.getResult(),g[m.name]=l,h=(l?"":"no-")+m.name,f.push(h)}C.className+=" "+f.join(" ");return g}()}if(Modernizr.csstransforms){var u=Modernizr.csstransforms3d?{translate:function(b){return"translate3d("+b[0]+"px, "+b[1]+"px, 0) "},scale:function(b){return"scale3d("+b+", "+b+", 1) "}}:{translate:function(b){return"translate("+b[0]+"px, "+b[1]+"px) "},scale:function(b){return"scale("+b+") "}},t=function(N,M,L){var K=G.data(N,"isoTransform")||{},J={},I,p={},o;J[M]=L,G.extend(K,J);for(I in K){o=K[I],p[I]=u[I](o)}var l=p.translate||"",e=p.scale||"",b=l+e;G.data(N,"isoTransform",K),N.style[D]=b};G.cssNumber.scale=!0,G.cssHooks.scale={set:function(d,c){typeof c=="string"&&(c=parseFloat(c)),t(d,"scale",c)},get:function(b,f){var e=G.data(b,"isoTransform");return e&&e.scale?e.scale:1}},G.fx.step.scale=function(b){G.cssHooks.scale.set(b.elem,b.now+b.unit)},G.cssNumber.translate=!0,G.cssHooks.translate={set:function(d,c){t(d,"translate",c)},get:function(b,f){var e=G.data(b,"isoTransform");return e&&e.translate?e.translate:[0,0]}}}var s=G.event,r;s.special.smartresize={setup:function(){G(this).bind("resize",s.special.smartresize.handler)},teardown:function(){G(this).unbind("resize",s.special.smartresize.handler)},handler:function(f,e){var h=this,g=arguments;f.type="smartresize",r&&clearTimeout(r),r=setTimeout(function(){jQuery.event.handle.apply(h,g)},e==="execAsap"?0:100)}},G.fn.smartresize=function(b){return b?this.bind("smartresize",b):this.trigger("smartresize",["execAsap"])},G.Isotope=function(b,d){this.element=G(d),this._create(b),this._init()};var q=["overflow","position","width","height"];G.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:Modernizr.csstransforms&&!G.browser.opera?{opacity:0,scale:0.001}:{opacity:0},visibleStyle:Modernizr.csstransforms&&!G.browser.opera?{opacity:1,scale:1}:{opacity:1},animationEngine:G.browser.opera?"jquery":"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},G.Isotope.prototype={_create:function(I){this.options=G.extend(!0,{},G.Isotope.settings,I),this.styleQueue=[],this.elemCount=0;var p=this.element[0].style;this.originalStyle={};for(var o=0,n=q.length;o<n;o++){var m=q[o];this.originalStyle[m]=p[m]||null}this.element.css({overflow:"hidden",position:"relative"}),this._updateAnimationEngine(),this._updateUsingTransforms();var l={"original-order":function(d,c){return c.elemCount}};this.options.getSortData=G.extend(this.options.getSortData,l),this.reloadItems();var b=G(document.createElement("div")).prependTo(this.element);this.offset=b.position(),b.remove();var a=this;setTimeout(function(){a.element.addClass(a.options.containerClass)},0),this.options.resizable&&G(H).bind("smartresize.isotope",function(){a.resize()})},_getAtoms:function(f){var e=this.options.itemSelector,h=e?f.filter(e).add(f.find(e)):f,g={position:"absolute"};this.usingTransforms&&(g.left=0,g.top=0),h.css(g).addClass(this.options.itemClass),this.updateSortData(h,!0);return h},_init:function(b){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(b)},option:function(b){if(G.isPlainObject(b)){this.options=G.extend(!0,this.options,b);for(var d in b){this._updateOption(d)}}},_updateOption:function(d){var c="_update"+d.charAt(0).toUpperCase()+d.slice(1);this[c]&&this[c]()},_updateAnimationEngine:function(){var b=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");switch(b){case"css":case"none":this.isUsingJQueryAnimation=!1;break;case"jquery":this.isUsingJQueryAnimation=!0;break;default:this.isUsingJQueryAnimation=!Modernizr.csstransitions}this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){this.usingTransforms=this.options.transformsEnabled&&Modernizr.csstransforms&&Modernizr.csstransitions&&!this.isUsingJQueryAnimation,this.getPositionStyles=this.usingTransforms?this._translate:this._positionAbs},_filter:function(L){var K,J=this.options.filter===""?"*":this.options.filter;if(!J){K=L}else{var I=this.options.hiddenClass,p="."+I,o=L.not(p),n=L.filter(p),m=n;K=L.filter(J);if(J!=="*"){m=n.filter(J);var l=o.not(J).toggleClass(I);l.addClass(I),this.styleQueue.push({$el:l,style:this.options.hiddenStyle})}this.styleQueue.push({$el:m,style:this.options.visibleStyle}),m.removeClass(I)}return K},updateSortData:function(b,o){var n=this,m=this.options.getSortData,l,h;b.each(function(){l=G(this),h={};for(var c in m){h[c]=m[c](l,n)}G.data(this,"isotope-sort-data",h),o&&n.elemCount++})},_sort:function(){var f=this.options.sortBy,e=this._getSorter,h=this.options.sortAscending?1:-1,g=function(l,c){var b=e(l,f),a=e(c,f);b===a&&f!=="original-order"&&(b=e(l,"original-order"),a=e(c,"original-order"));return(b>a?1:b<a?-1:0)*h};this.$filteredAtoms.sort(g)},_getSorter:function(b,d){return G.data(b,"isotope-sort-data")[d]},_translate:function(d,c){return{translate:[d,c]}},_positionAbs:function(d,c){return{left:d,top:c}},_pushPosition:function(f,e,h){e+=this.offset.left,h+=this.offset.top;var g=this.getPositionStyles(e,h);this.styleQueue.push({$el:f,style:g}),this.options.itemPositionDataEnabled&&f.data("isotope-item-position",{x:e,y:h})},layout:function(b,o){var n=this.options.layoutMode;this["_"+n+"Layout"](b);if(this.options.resizesContainer){var m=this["_"+n+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:m})}var l=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",h=this.options.animationOptions;G.each(this.styleQueue,function(d,c){c.$el[l](c.style,h)}),this.styleQueue=[],o&&o.call(b),this.isLaidOut=!0},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(b){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,b)},addItems:function(e,d){var f=this._getAtoms(e);this.$allAtoms=this.$allAtoms.add(f),d&&d(f)},insert:function(e,d){this.element.append(e);var f=this;this.addItems(e,function(g){var c=f._filter(g);f.$filteredAtoms=f.$filteredAtoms.add(c)}),this._sort(),this.reLayout(d)},appended:function(e,d){var f=this;this.addItems(e,function(b){f.$filteredAtoms=f.$filteredAtoms.add(b),f.layout(b,d)})},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(b){this.$allAtoms=this.$allAtoms.not(b),this.$filteredAtoms=this.$filteredAtoms.not(b),b.remove()},_shuffleArray:function(f){var e,h,g=f.length;if(g){while(--g){h=~~(Math.random()*(g+1)),e=f[h],f[h]=f[g],f[g]=e}}return f},shuffle:function(b){this.options.sortBy="shuffle",this.$allAtoms=this._shuffleArray(this.$allAtoms),this.$filteredAtoms=this._filter(this.$allAtoms),this.reLayout(b)},destroy:function(){var m=this.usingTransforms;this.$allAtoms.removeClass(this.options.hiddenClass+" "+this.options.itemClass).each(function(){this.style.position=null,this.style.top=null,this.style.left=null,this.style.opacity=null,m&&(this.style[D]=null)});var l=this.element[0].style;for(var e=0,b=q.length;e<b;e++){var a=q[e];l[a]=this.originalStyle[a]}this.element.unbind(".isotope").removeClass(this.options.containerClass).removeData("isotope"),G(H).unbind(".isotope")},_getSegments:function(L){var K=this.options.layoutMode,J=L?"rowHeight":"columnWidth",I=L?"height":"width",p=L?"Height":"Width",o=L?"rows":"cols",n=this.element[I](),m,l;l=this.options[K]&&this.options[K][J]||this.$filteredAtoms["outer"+p](!0)||n,m=Math.floor(n/l),m=Math.max(m,1),this[K][o]=m,this[K][J]=l},_checkIfSegmentsChanged:function(f){var e=this.options.layoutMode,h=f?"rows":"cols",g=this[e][h];this._getSegments(f);return this[e][h]!==g},_masonryReset:function(){this.masonry={},this._getSegments();var b=this.masonry.cols;this.masonry.colYs=[];while(b--){this.masonry.colYs.push(0)}},_masonryLayout:function(b){var f=this,e=f.masonry;b.each(function(){var c=G(this),o=Math.ceil(c.outerWidth(!0)/e.columnWidth);o=Math.min(o,e.cols);if(o===1){f._masonryPlaceBrick(c,e.colYs)}else{var n=e.cols+1-o,m=[],l,d;for(d=0;d<n;d++){l=e.colYs.slice(d,d+o),m[d]=Math.max.apply(Math,l)}f._masonryPlaceBrick(c,m)}})},_masonryPlaceBrick:function(m,l){var K=Math.min.apply(Math,l),J=0;for(var I=0,p=l.length;I<p;I++){if(l[I]===K){J=I;break}}x=this.masonry.columnWidth*J,y=K,this._pushPosition(m,x,y);var o=K+m.outerHeight(!0),n=this.masonry.cols+1-p;for(I=0;I<n;I++){this.masonry.colYs[J+I]=o}},_masonryGetContainerSize:function(){var b=Math.max.apply(Math,this.masonry.colYs);return{height:b}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(b){var h=this,g=this.element.width(),f=this.fitRows;b.each(function(){var c=G(this),e=c.outerWidth(!0),d=c.outerHeight(!0);f.x!==0&&e+f.x>g&&(f.x=0,f.y=f.height),h._pushPosition(c,f.x,f.y),f.height=Math.max(f.y+d,f.height),f.x+=e})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return !0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(b){var f=this,e=this.cellsByRow;b.each(function(){var c=G(this),n=e.index%e.cols,m=~~(e.index/e.cols),l=(n+0.5)*e.columnWidth-c.outerWidth(!0)/2,d=(m+0.5)*e.rowHeight-c.outerHeight(!0)/2;f._pushPosition(c,l,d),e.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(b){var d=this;b.each(function(c){var e=G(this);d._pushPosition(e,0,d.straightDown.y),d.straightDown.y+=e.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return !0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var b=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(b--){this.masonryHorizontal.rowXs.push(0)}},_masonryHorizontalLayout:function(b){var f=this,e=f.masonryHorizontal;b.each(function(){var c=G(this),o=Math.ceil(c.outerHeight(!0)/e.rowHeight);o=Math.min(o,e.rows);if(o===1){f._masonryHorizontalPlaceBrick(c,e.rowXs)}else{var n=e.rows+1-o,m=[],l,d;for(d=0;d<n;d++){l=e.rowXs.slice(d,d+o),m[d]=Math.max.apply(Math,l)}f._masonryHorizontalPlaceBrick(c,m)}})},_masonryHorizontalPlaceBrick:function(m,l){var K=Math.min.apply(Math,l),J=0;for(var I=0,p=l.length;I<p;I++){if(l[I]===K){J=I;break}}x=K,y=this.masonryHorizontal.rowHeight*J,this._pushPosition(m,x,y);var o=K+m.outerWidth(!0),n=this.masonryHorizontal.rows+1-p;for(I=0;I<n;I++){this.masonryHorizontal.rowXs[J+I]=o}},_masonryHorizontalGetContainerSize:function(){var b=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:b}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(b){var h=this,g=this.element.height(),f=this.fitColumns;b.each(function(){var c=G(this),e=c.outerWidth(!0),d=c.outerHeight(!0);f.y!==0&&d+f.y>g&&(f.x=f.width,f.y=0),h._pushPosition(c,f.x,f.y),f.width=Math.max(f.x+e,f.width),f.y+=d})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return !0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(b){var f=this,e=this.cellsByColumn;b.each(function(){var c=G(this),n=~~(e.index/e.rows),m=e.index%e.rows,l=(n+0.5)*e.columnWidth-c.outerWidth(!0)/2,d=(m+0.5)*e.rowHeight-c.outerHeight(!0)/2;f._pushPosition(c,l,d),e.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(b){var d=this;b.each(function(c){var e=G(this);d._pushPosition(e,d.straightAcross.x,0),d.straightAcross.x+=e.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return !0}},G.fn.imagesLoaded=function(f){var c=this.find("img"),h=c.length,g=this;c.length||f.call(this),c.bind("load",function(){--h<=0&&f.call(g)}).each(function(){if(this.complete||this.complete===F){var b=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=b}});return this},G.fn.isotope=function(b){if(typeof b=="string"){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var a=G.data(this,"isotope");if(!a){return G.error("cannot call methods on isotope prior to initialization; attempted to call method '"+b+"'")}if(!G.isFunction(a[b])||b.charAt(0)==="_"){return G.error("no such method '"+b+"' for isotope instance")}a[b].apply(a,d)})}else{this.each(function(){var a=G.data(this,"isotope");a?(a.option(b),a._init()):G.data(this,"isotope",new G.Isotope(b,this))})}return this}})(window,jQuery);(function(J,n,W){var K={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:false,returnFocus:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true},A="colorbox",T="cbox",V=T+"_open",e=T+"_load",U=T+"_complete",v=T+"_cleanup",ab=T+"_closed",l=T+"_purge",w=J.browser.msie&&!J.support.opacity,ae=w&&J.browser.version<7,aa=T+"_IE6",R,af,ag,d,H,r,b,Q,c,Z,N,m,h,q,u,X,t,S,C,D,ac={},ah,o,g,a,z,I,p,F,Y,M=false,L,s=T+"Element";function P(ak,ai){var aj=n.createElement("div");if(ak){aj.id=T+ak}aj.style.cssText=ai||false;return J(aj)}function O(ai,aj){aj=aj==="x"?Z.width():Z.height();return(typeof ai==="string")?Math.round((/%/.test(ai)?(aj/100)*parseInt(ai,10):parseInt(ai,10))):ai}function E(ai){return ac.photo||/\.(gif|png|jpg|jpeg|bmp)(?:\?([^#]*))?(?:#(\.*))?$/i.test(ai)}function ad(aj){for(var ai in aj){if(J.isFunction(aj[ai])&&ai.substring(0,2)!=="on"){aj[ai]=aj[ai].call(z)}}aj.rel=aj.rel||z.rel||"nofollow";aj.href=J.trim(aj.href||J(z).attr("href"));aj.title=aj.title||z.title}function G(ai,aj){if(aj){aj.call(z)}J.event.trigger(ai)}function B(){var aj,al=T+"Slideshow_",am="click."+T,an,ak,ai;if(ac.slideshow&&c[1]){an=function(){X.text(ac.slideshowStop).unbind(am).bind(U,function(){if(I<c.length-1||ac.loop){aj=setTimeout(L.next,ac.slideshowSpeed)}}).bind(e,function(){clearTimeout(aj)}).one(am+" "+v,ak);af.removeClass(al+"off").addClass(al+"on");aj=setTimeout(L.next,ac.slideshowSpeed)};ak=function(){clearTimeout(aj);X.text(ac.slideshowStart).unbind([U,e,v,am].join(" ")).one(am,an);af.removeClass(al+"on").addClass(al+"off")};if(ac.slideshowAuto){an()}else{ak()}}}function f(ai){if(!M){z=ai;ad(J.extend(ac,J.data(z,A)));c=J(z);I=0;if(ac.rel!=="nofollow"){c=J("."+s).filter(function(){var ak=J.data(this,A).rel||this.rel;return(ak===ac.rel)});I=c.index(z);if(I===-1){c=c.add(z);I=c.length-1}}if(!F){F=Y=true;af.show();if(ac.returnFocus){try{z.blur();J(z).one(ab,function(){try{this.focus()}catch(ak){}})}catch(aj){}}R.css({opacity:+ac.opacity,cursor:ac.overlayClose?"pointer":"auto"}).show();ac.w=O(ac.initialWidth,"x");ac.h=O(ac.initialHeight,"y");L.position(0);if(ae){Z.bind("resize."+aa+" scroll."+aa,function(){R.css({width:Z.width(),height:Z.height(),top:Z.scrollTop(),left:Z.scrollLeft()})}).trigger("resize."+aa)}G(V,ac.onOpen);D.add(q).hide();C.html(ac.close).show()}L.load(true)}}L=J.fn[A]=J[A]=function(ai,al){var aj=this,ak;if(!aj[0]&&aj.selector){return aj}ai=ai||{};if(al){ai.onComplete=al}if(!aj[0]||aj.selector===undefined){aj=J("<a/>");ai.open=true}aj.each(function(){J.data(this,A,J.extend({},J.data(this,A)||K,ai));J(this).addClass(s)});ak=ai.open;if(J.isFunction(ak)){ak=ak.call(aj)}if(ak){f(aj[0])}return aj};L.init=function(){Z=J(W);af=P().attr({id:A,"class":w?T+(ae?"IE6":"IE"):""});R=P("Overlay",ae?"position:absolute":"").hide();ag=P("Wrapper");d=P("Content").append(N=P("LoadedContent","width:0; height:0; overflow:hidden"),h=P("LoadingOverlay").add(P("LoadingGraphic")),q=P("Title"),u=P("Current"),t=P("Next"),S=P("Previous"),X=P("Slideshow").bind(V,B),C=P("Close"));ag.append(P().append(P("TopLeft"),H=P("TopCenter"),P("TopRight")),P(false,"clear:left").append(r=P("MiddleLeft"),d,b=P("MiddleRight")),P(false,"clear:left").append(P("BottomLeft"),Q=P("BottomCenter"),P("BottomRight"))).children().children().css({"float":"left"});m=P(false,"position:absolute; width:9999px; visibility:hidden; display:none");J("body").prepend(R,af.append(ag,m));d.children().hover(function(){J(this).addClass("hover")},function(){J(this).removeClass("hover")}).addClass("hover");ah=H.height()+Q.height()+d.outerHeight(true)-d.height();o=r.width()+b.width()+d.outerWidth(true)-d.width();g=N.outerHeight(true);a=N.outerWidth(true);af.css({"padding-bottom":ah,"padding-right":o}).hide();t.click(function(){L.next()});S.click(function(){L.prev()});C.click(function(){L.close()});D=t.add(S).add(u).add(X);d.children().removeClass("hover");J("."+s).live("click",function(ai){if(!((ai.button!==0&&typeof ai.button!=="undefined")||ai.ctrlKey||ai.shiftKey||ai.altKey)){ai.preventDefault();f(this)}});R.click(function(){if(ac.overlayClose){L.close()}});J(n).bind("keydown."+T,function(aj){var ai=aj.keyCode;if(F&&ac.escKey&&ai===27){aj.preventDefault();L.close()}if(F&&ac.arrowKey&&c[1]){if(ai===37){aj.preventDefault();S.click()}else{if(ai===39){aj.preventDefault();t.click()}}}})};L.remove=function(){af.add(R).remove();J("."+s).die("click").removeData(A).removeClass(s)};L.position=function(am,aj){var al,ak=Math.max(n.documentElement.clientHeight-ac.h-g-ah,0)/2+Z.scrollTop(),ai=Math.max(Z.width()-ac.w-a-o,0)/2+Z.scrollLeft();al=(af.width()===ac.w+a&&af.height()===ac.h+g)?0:am;ag[0].style.width=ag[0].style.height="9999px";function an(ao){H[0].style.width=Q[0].style.width=d[0].style.width=ao.style.width;h[0].style.height=h[1].style.height=d[0].style.height=r[0].style.height=b[0].style.height=ao.style.height}af.dequeue().animate({width:ac.w+a,height:ac.h+g,top:ak,left:ai},{duration:al,complete:function(){an(this);Y=false;ag[0].style.width=(ac.w+a+o)+"px";ag[0].style.height=(ac.h+g+ah)+"px";if(aj){aj()}},step:function(){an(this)}})};L.resize=function(ai){if(F){ai=ai||{};if(ai.width){ac.w=O(ai.width,"x")-a-o}if(ai.innerWidth){ac.w=O(ai.innerWidth,"x")}N.css({width:ac.w});if(ai.height){ac.h=O(ai.height,"y")-g-ah}if(ai.innerHeight){ac.h=O(ai.innerHeight,"y")}if(!ai.innerHeight&&!ai.height){var aj=N.wrapInner("<div style='overflow:auto'></div>").children();ac.h=aj.height();aj.replaceWith(aj.children())}N.css({height:ac.h});L.position(ac.transition==="none"?0:ac.speed)}};L.prep=function(ak){if(!F){return}var al=ac.transition==="none"?0:ac.speed;Z.unbind("resize."+T);N.remove();N=P("LoadedContent").html(ak);function ai(){ac.w=ac.w||N.width();ac.w=ac.mw&&ac.mw<ac.w?ac.mw:ac.w;return ac.w}function am(){ac.h=ac.h||N.height();ac.h=ac.mh&&ac.mh<ac.h?ac.mh:ac.h;return ac.h}N.hide().appendTo(m.show()).css({width:ai(),overflow:ac.scrolling?"auto":"hidden"}).css({height:am()}).prependTo(d);m.hide();J(p).css({"float":"none"});if(ae){J("select").not(af.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(v,function(){this.style.visibility="inherit"})}function aj(an){L.position(an,function(){var au,av,ar,aq,at=c.length,ap,ao;if(!F){return}ao=function(){h.hide();G(U,ac.onComplete)};if(w){if(p){N.fadeIn(100)}}q.html(ac.title).add(N).show();if(at>1){if(typeof ac.current==="string"){u.html(ac.current.replace(/\{current\}/,I+1).replace(/\{total\}/,at)).show()}t[(ac.loop||I<at-1)?"show":"hide"]().html(ac.next);S[(ac.loop||I)?"show":"hide"]().html(ac.previous);au=I?c[I-1]:c[at-1];ar=I<at-1?c[I+1]:c[0];if(ac.slideshow){X.show()}if(ac.preloading){aq=J.data(ar,A).href||ar.href;av=J.data(au,A).href||au.href;aq=J.isFunction(aq)?aq.call(ar):aq;av=J.isFunction(av)?av.call(au):av;if(E(aq)){J("<img/>")[0].src=aq}if(E(av)){J("<img/>")[0].src=av}}}else{D.hide()}if(ac.iframe){ap=J("<iframe/>").addClass(T+"Iframe")[0];if(ac.fastIframe){ao()}else{J(ap).load(ao)}ap.name=T+(+new Date());ap.src=ac.href;if(!ac.scrolling){ap.scrolling="no"}if(w){ap.frameBorder=0;ap.allowTransparency="true"}J(ap).appendTo(N).one(l,function(){ap.src="//about:blank"})}else{ao()}if(ac.transition==="fade"){af.fadeTo(al,1,function(){af[0].style.filter=""})}else{af[0].style.filter=""}Z.bind("resize."+T,function(){L.position(0)})})}if(ac.transition==="fade"){af.fadeTo(al,0,function(){aj(0)})}else{aj(al)}};L.load=function(ak){var aj,al,ai=L.prep;Y=true;p=false;z=c[I];if(!ak){ad(J.extend(ac,J.data(z,A)))}G(l);G(e,ac.onLoad);ac.h=ac.height?O(ac.height,"y")-g-ah:ac.innerHeight&&O(ac.innerHeight,"y");ac.w=ac.width?O(ac.width,"x")-a-o:ac.innerWidth&&O(ac.innerWidth,"x");ac.mw=ac.w;ac.mh=ac.h;if(ac.maxWidth){ac.mw=O(ac.maxWidth,"x")-a-o;ac.mw=ac.w&&ac.w<ac.mw?ac.w:ac.mw}if(ac.maxHeight){ac.mh=O(ac.maxHeight,"y")-g-ah;ac.mh=ac.h&&ac.h<ac.mh?ac.h:ac.mh}aj=ac.href;h.show();if(ac.inline){P().hide().insertBefore(J(aj)[0]).one(l,function(){J(this).replaceWith(N.children())});ai(J(aj))}else{if(ac.iframe){ai(" ")}else{if(ac.html){ai(ac.html)}else{if(E(aj)){J(p=new Image()).addClass(T+"Photo").error(function(){ac.title=false;ai(P("Error").text("This image could not be loaded"))}).load(function(){var am;p.onload=null;if(ac.scalePhotos){al=function(){p.height-=p.height*am;p.width-=p.width*am};if(ac.mw&&p.width>ac.mw){am=(p.width-ac.mw)/p.width;al()}if(ac.mh&&p.height>ac.mh){am=(p.height-ac.mh)/p.height;al()}}if(ac.h){p.style.marginTop=Math.max(ac.h-p.height,0)/2+"px"}if(c[1]&&(I<c.length-1||ac.loop)){p.style.cursor="pointer";p.onclick=function(){L.next()}}if(w){p.style.msInterpolationMode="bicubic"}setTimeout(function(){ai(p)},1)});setTimeout(function(){p.src=aj},1)}else{if(aj){m.load(aj,function(an,am,ao){ai(am==="error"?P("Error").text("Request unsuccessful: "+ao.statusText):J(this).contents())})}}}}}};L.next=function(){if(!Y&&c[1]&&(I<c.length-1||ac.loop)){I=I<c.length-1?I+1:0;L.load()}};L.prev=function(){if(!Y&&c[1]&&(I||ac.loop)){I=I?I-1:c.length-1;L.load()}};L.close=function(){if(F&&!M){M=true;F=false;G(v,ac.onCleanup);Z.unbind("."+T+" ."+aa);R.fadeTo(200,0);af.stop().fadeTo(300,0,function(){af.add(R).css({opacity:1,cursor:"auto"}).hide();G(l);N.remove();setTimeout(function(){M=false;G(ab,ac.onClosed)},1)})}};L.element=function(){return J(z)};L.settings=K;J(L.init)}(jQuery,document,this));jQuery(document).ready(function(){jQuery("a[rel='lightbox_image']").colorbox();jQuery("a[rel='lightbox_video']").each(setZoomIcon);jQuery("a[rel='lightbox_image']").each(setZoomIcon)});function setZoomIcon(f){if(this.getElementsByTagName("img").length==0){return true}var c="image_icon_play.png";if(this.rel=="lightbox_image"){c="image_icon_zoom.png"}var e;var d=jQuery(this);var a=d.find("img:first");d.append(e=jQuery("<img src='"+themeDir+"/images/"+c+"' class='lb_zoom' />"));var b=a.height();if(a.height()>a.width()){b=a.width()}var h=jQuery(this).offset();e.css({position:"absolute",height:b+"px",width:b+"px"});e.offset({left:h.left+Math.round((a.width()-e.width())/2)});if(jQuery.browser.mozilla){e.offset({left:a.offset().left+Math.round((a.width()-e.width())/2)})}if(jQuery.browser.msie){e.offset({top:a.offset().top+Math.round((a.height()-e.height())/2),left:a.offset().left+Math.round((a.width()-e.width())/2)})}if(jQuery.browser.msie){var g=e.offset().left;if(g<0){g=-g}e.offset({left:g+Math.round((a.width()-e.width())/2),top:a.offset().top});e.hide()}else{e.css({opacity:0})}d.hover(function(){var n=jQuery(this).find("img.lb_zoom");if(jQuery.browser.webkit){var l=jQuery(this).find("img:first");var m=l.height();if(l.height()>l.width()){m=l.width()}n.css({width:m+"px",height:m+"px"});n.offset({top:l.offset().top+Math.round((l.height()-n.height())/2),left:l.offset().left+Math.round((l.width()-n.width())/2)})}if(jQuery.browser.opera){var l=jQuery(this).find("img:first");if(parseInt(n.css("top"))<0){n.hide()}}if(jQuery.browser.msie){n.show()}else{n.animate({opacity:1},300)}},function(){if(jQuery.browser.msie){e.hide()}else{e.animate({opacity:0},300)}})}function setForVideo(c){var a=jQuery("#"+c);var b=a.find("div.galleria-thumbnails").find("div.galleria-image");b.unbind("click");b.find("img").bind("click",function(o){var g=a.find(".galleria-stage").width();var q=a.find(".galleria-stage").height();var d=this.src.split("?video=")[1];if(d.indexOf("youtube.com")>0||d.indexOf("vimeo.com")>0){var n=a.find("div.galleria-images").find("div.galleria-image");var m=a.find("galleria-thumbnails-list").find("img");n.each(function(t){var v=m[t].attr("src").split("?video=")[1];if(v.indexOf("youtube.com")>0||v.indexOf("vimeo.com")>0){n[t].html('<iframe frameborder="0" src="'+v+'" width="'+g+'" height="'+q+'"></iframe>')}else{var u={};var r={};var e={};r.id="#vh_"+c;e.moviefile=encodeURIComponent(v);e.autoplay=1;e.wmode="transparent";u.moviefile=encodeURIComponent(v);u.autoplay=1;u.wmode="transparent";var s=themeDir+"/tdplayer.swf";swfobject.embedSWF(s,"vh_"+c,a.find(".galleria-stage").width(),a.find(".galleria-stage").height(),"9",false,e,u,r)}})}else{var l={};var p={};var h={};p.id="#vh_"+c;h.moviefile=encodeURIComponent(d);h.autoplay=1;h.wmode="transparent";l.moviefile=encodeURIComponent(d);l.autoplay=1;l.wmode="transparent";var f=themeDir+"/tdplayer.swf";swfobject.embedSWF(f,"vh_"+c,a.find(".galleria-stage").width(),a.find(".galleria-stage").height(),"9",false,h,l,p)}})}function showGalleryFrame(b){var a=jQuery("#"+b);a.find("div.galleria-images").find("img").each(function(c){var d=this.src.split("?video=")[1];this.parentNode.innerHTML='<iframe scrolling="no" style="z-index: 2 !important; overflow-x: hidden; overflow-y: hidden;" id="gl_video" src="'+themeDir+"/lib/videogallery.php?src="+d+"&theme="+themeDir+'" width="100%" height="100%"></iframe>'});a.find("div.galleria-thumbnails").find("div.galleria-image").unbind("click");a.find("div.galleria-image-nav-right").hide();a.find("div.galleria-image-nav-left").hide();a.find("div.galleria-counter").hide();a.find("div.galleria-thumbnails").find("div.galleria-image").find("img").bind("click",function(){var c=this.src.split("?video=")[1];document.getElementById("gl_video").src=themeDir+"/lib/videogallery.php?src="+c+"&theme="+themeDir})}(function(f){var c,l=this,q=document,e=f(q);var p=false,m=navigator.userAgent.toLowerCase(),d=l.location.hash.replace(/#\//,""),n=function(){return Galleria.TOUCH?"touchstart":"click"},h=(function(){var s=3,t=q.createElement("div");while(t.innerHTML="<!--[if gt IE "+(++s)+"]><i></i><![endif]-->",t.getElementsByTagName("i")[0]){}return s>4?s:c}()),r=function(){return{html:q.documentElement,body:q.body,head:q.getElementsByTagName("head")[0],title:q.title}},b={trunk:{},add:function(w,v,u,t){t=t||false;this.clear(w);if(t){var s=v;v=function(){s();b.add(w,v,u)}}this.trunk[w]=l.setTimeout(v,u)},clear:function(u){var s=function(v){l.clearTimeout(this.trunk[v]);delete this.trunk[v]};if(!!u&&u in this.trunk){s.call(b,u)}else{if(typeof u=="undefined"){for(var t in this.trunk){s.call(b,t)}}}}},a=[],o={fade:function(t,s){f(t.next).css("opacity",0).show().animate({opacity:1},t.speed,s);if(t.prev){f(t.prev).css("opacity",1).show().animate({opacity:0},t.speed)}},flash:function(t,s){f(t.next).css("opacity",0);if(t.prev){f(t.prev).animate({opacity:0},(t.speed/2),function(){f(t.next).animate({opacity:1},t.speed,s)})}else{f(t.next).animate({opacity:1},t.speed,s)}},pulse:function(t,s){if(t.prev){f(t.prev).hide()}f(t.next).css("opacity",0).animate({opacity:1},t.speed,s)},slide:function(w,t){var v=f(w.next).parent(),s=this.$("images"),u=this._stageWidth,z=this.getOptions("easing");v.css({left:u*(w.rewind?-1:1)});s.animate({left:u*(w.rewind?1:-1)},{duration:w.speed,queue:false,easing:z,complete:function(){s.css("left",0);v.css("left",0);t()}})},fadeslide:function(u,t){var s=0,w=this.getOptions("easing"),v=this.getStageWidth();if(u.prev){s=g.parseValue(f(u.prev).css("left"));f(u.prev).css({opacity:1,left:s}).animate({opacity:0,left:s+(v*(u.rewind?1:-1))},{duration:u.speed,queue:false,easing:w})}s=g.parseValue(f(u.next).css("left"));f(u.next).css({left:s+(v*(u.rewind?-1:1)),opacity:0}).animate({opacity:1,left:s},{duration:u.speed,complete:t,queue:false,easing:w})}},g=(function(){return{array:function(s){return Array.prototype.slice.call(s)},create:function(s,u){u=u||"div";var t=q.createElement(u);t.className=s;return t},forceStyles:function(t,s){t=f(t);if(t.attr("style")){t.data("styles",t.attr("style")).removeAttr("style")}t.css(s)},revertStyles:function(){f.each(g.array(arguments),function(s,t){t=f(t).removeAttr("style");if(t.data("styles")){t.attr("style",t.data("styles")).data("styles",null)}})},moveOut:function(s){g.forceStyles(s,{position:"absolute",left:-10000})},moveIn:function(){g.revertStyles.apply(g,g.array(arguments))},hide:function(t,u,v){t=f(t);if(!t.data("opacity")){t.data("opacity",t.css("opacity"))}var s={opacity:0};if(u){t.stop().animate(s,u,v)}else{t.css(s)}},show:function(u,v,w){u=f(u);var t=parseFloat(u.data("opacity"))||1,s={opacity:t};if(t==1){u.data("opacity",null)}if(v){u.stop().animate(s,v,w)}else{u.css(s)}},addTimer:function(){b.add.apply(b,g.array(arguments));return this},clearTimer:function(){b.clear.apply(b,g.array(arguments));return this},wait:function(u){u=f.extend({until:function(){return false},success:function(){},error:function(){Galleria.raise("Could not complete wait function.")},timeout:3000},u);var v=g.timestamp(),s,t;l.setTimeout(function(){t=g.timestamp();s=t-v;if(u.until(s)){u.success();return false}if(t>=v+u.timeout){u.error();return false}l.setTimeout(arguments.callee,2)},2)},toggleQuality:function(s,t){if(!(h==7||h==8)||!!s===false){return}if(typeof t==="undefined"){t=s.style.msInterpolationMode=="nearest-neighbor"}s.style.msInterpolationMode=t?"bicubic":"nearest-neighbor"},insertStyleTag:function(u){var t=q.createElement("style");r().head.appendChild(t);if(t.styleSheet){t.styleSheet.cssText=u}else{var s=q.createTextNode(u);t.appendChild(s)}},loadScript:function(v,z){var t=false,u=f("<script>").attr({src:v,async:true}).get(0);u.onload=u.onreadystatechange=function(){if(!t&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){t=true;if(typeof z=="function"){z.call(this,this)}u.onload=u.onreadystatechange=null}};var w=q.getElementsByTagName("script")[0];w.parentNode.insertBefore(u,w)},parseValue:function(t){if(typeof t=="number"){return t}else{if(typeof t=="string"){var s=t.match(/\-?\d/g);return s&&s.constructor==Array?s.join("")*1:0}else{return 0}}},timestamp:function(){return new Date().getTime()},loadCSS:function(s,z,w){var v,t=false,u;f("link[rel=stylesheet]").each(function(){if(new RegExp(s).test(this.href)){v=this;return false}});if(typeof z=="function"){w=z;z=c}w=w||function(){};if(v){w.call(v,v);return v}u=q.styleSheets.length;if(p){s+="?"+g.timestamp()}if(f("#"+z).length){f("#"+z).attr("href",s);u--;t=true}else{v=f("<link>").attr({rel:"stylesheet",href:s,id:z}).get(0);l.setTimeout(function(){var A=f('link[rel="stylesheet"], style');if(A.length){A.get(0).parentNode.insertBefore(v,A[0])}else{r().head.appendChild(v)}if(h){v.attachEvent("onreadystatechange",function(B){if(v.readyState=="complete"){t=true}})}else{t=true}},10)}if(typeof w=="function"){g.wait({until:function(){return t&&q.styleSheets.length>u},success:function(){g.addTimer("css",function(){w.call(v,v)},100)},error:function(){Galleria.raise("Theme CSS could not load")},timeout:1000})}return v}}})();Galleria=function(){var C=this;this._theme=c;this._options={};this._playing=false;this._playtime=5000;this._active=null;this._queue={length:0};this._data=[];this._dom={};this._thumbnails=[];this._initialized=false;this._stageWidth=0;this._stageHeight=0;this._target=c;this._id=g.timestamp();var w="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description info-author thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip",v="current total";f.each(w.split(" "),function(E,F){C._dom[F]=g.create("galleria-"+F)});f.each(v.split(" "),function(E,F){C._dom[F]=g.create("galleria-"+F,"span")});var u=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:false,press:function(F){var E=F.keyCode||F.which;if(E in u.map&&typeof u.map[E]=="function"){u.map[E].call(C,F)}},attach:function(G){for(var F in G){var E=F.toUpperCase();if(E in u.keys){u.map[u.keys[E]]=G[F]}}if(!u.bound){u.bound=true;e.bind("keydown",u.press)}},detach:function(){u.bound=false;e.unbind("keydown",u.press)}};var A=this._controls={0:c,1:c,active:0,swap:function(){A.active=A.active?0:1},getActive:function(){return A[A.active]},getNext:function(){return A[1-A.active]}};var B=this._carousel={next:C.$("thumb-nav-right"),prev:C.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var F=0,G=0,E=[0];f.each(C._thumbnails,function(I,H){if(H.ready){F+=H.outerWidth||f(H.container).outerWidth(true);E[I+1]=F;G=Math.max(G,H.outerHeight||f(H.container).outerHeight(true))}});C.$("thumbnails").css({width:F,height:G});B.max=F;B.hooks=E;B.width=C.$("thumbnails-list").width();B.setClasses();C.$("thumbnails-container").toggleClass("galleria-carousel",F>B.width)},bindControls:function(){B.next.bind(n(),function(F){F.preventDefault();if(C._options.carousel_steps=="auto"){for(var E=B.current;E<B.hooks.length;E++){if(B.hooks[E]-B.hooks[B.current]>B.width){B.set(E-2);break}}}else{B.set(B.current+C._options.carousel_steps)}});B.prev.bind(n(),function(F){F.preventDefault();if(C._options.carousel_steps=="auto"){for(var E=B.current;E>=0;E--){if(B.hooks[B.current]-B.hooks[E]>B.width){B.set(E+2);break}else{if(E==0){B.set(0);break}}}}else{B.set(B.current-C._options.carousel_steps)}})},set:function(E){E=Math.max(E,0);while(B.hooks[E-1]+B.width>B.max&&E>=0){E--}B.current=E;B.animate()},getLast:function(E){return(E||B.current)-1},follow:function(E){if(E==0||E==B.hooks.length-2){B.set(E);return}var F=B.current;while(B.hooks[F]-B.hooks[B.current]<B.width&&F<=B.hooks.length){F++}if(E-1<B.current){B.set(E-1)}else{if(E+2>F){B.set(E-F+B.current+2)}}},setClasses:function(){B.prev.toggleClass("disabled",!B.current);B.next.toggleClass("disabled",B.hooks[B.current]+B.width>B.max)},animate:function(F){B.setClasses();var E=B.hooks[B.current]*-1;if(isNaN(E)){return}C.$("thumbnails").animate({left:E},{duration:C._options.carousel_speed,easing:C._options.easing,queue:false})}};var D=this._tooltip={initialized:false,open:false,init:function(){D.initialized=true;var E=".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}";g.insertStyleTag(E);C.$("tooltip").css("opacity",0.8);g.hide(C.get("tooltip"))},move:function(L){var K=C.getMousePosition(L).x,J=C.getMousePosition(L).y,H=C.$("tooltip"),N=K,M=J,O=H.outerHeight(true)+1,G=H.outerWidth(true),I=O+15;var F=C.$("container").width()-G-2,E=C.$("container").height()-O-2;if(!isNaN(N)&&!isNaN(M)){N+=10;M-=30;N=Math.max(0,Math.min(F,N));M=Math.max(0,Math.min(E,M));if(J<I){M=I}H.css({left:N,top:M})}},bind:function(F,G){if(!D.initialized){D.init()}var E=function(H,I){D.define(H,I);f(H).hover(function(){g.clearTimer("switch_tooltip");C.$("container").unbind("mousemove",D.move).bind("mousemove",D.move).trigger("mousemove");D.show(H);Galleria.utils.addTimer("tooltip",function(){C.$("tooltip").stop();g.show(C.get("tooltip"),400);D.open=true},D.open?0:1000)},function(){C.$("container").unbind("mousemove",D.move);g.clearTimer("tooltip");C.$("tooltip").stop();g.hide(C.get("tooltip"),200,function(){g.addTimer("switch_tooltip",function(){D.open=false},1000)})})};if(typeof G=="string"){E((F in C._dom?C.get(F):F),G)}else{f.each(F,function(H,I){E(C.get(H),I)})}},show:function(E){E=f(E in C._dom?C.get(E):E);var F=E.data("tt");if(!F){return}F=typeof F=="function"?F():F;C.$("tooltip").html(F.replace(/\s/,"&nbsp;"));E.bind("mouseup",function(G){l.setTimeout((function(H){return function(){D.move(H)}})(G),10);E.unbind("mouseup",arguments.callee)})},define:function(F,G){if(typeof G!=="function"){var E=G;G=function(){return E}}F=f(F in C._dom?C.get(F):F).data("tt",G);D.show(F)}};var z=this._fullscreen={scrolled:0,enter:function(F){g.hide(C.getActiveImage());C.$("container").addClass("fullscreen");z.scrolled=f(l).scrollTop();g.forceStyles(C.get("container"),{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:10000});var E={height:"100%",overflow:"hidden",margin:0,padding:0};g.forceStyles(r().html,E);g.forceStyles(r().body,E);C.attachKeyboard({escape:C.exitFullscreen,right:C.next,left:C.prev});C.rescale(function(){g.addTimer("fullscreen_enter",function(){g.show(C.getActiveImage());if(typeof F=="function"){F.call(C)}},100);C.trigger(Galleria.FULLSCREEN_ENTER)});f(l).resize(function(){z.scale()})},scale:function(){C.rescale()},exit:function(E){g.hide(C.getActiveImage());C.$("container").removeClass("fullscreen");g.revertStyles(C.get("container"),r().html,r().body);l.scrollTo(0,z.scrolled);C.detachKeyboard();C.rescale(function(){g.addTimer("fullscreen_exit",function(){g.show(C.getActiveImage());if(typeof E=="function"){E.call(C)}},50);C.trigger(Galleria.FULLSCREEN_EXIT)});f(l).unbind("resize",z.scale)}};var t=this._idle={trunk:[],bound:false,add:function(F,H){if(!F){return}if(!t.bound){t.addEvent()}F=f(F);var G={};for(var E in H){G[E]=F.css(E)}F.data("idle",{from:G,to:H,complete:true,busy:false});t.addTimer();t.trunk.push(F)},remove:function(E){E=jQuery(E);f.each(t.trunk,function(F,G){if(G.length&&!G.not(E).length){C._idle.show(E);C._idle.trunk.splice(F,1)}});if(!t.trunk.length){t.removeEvent();g.clearTimer("idle")}},addEvent:function(){t.bound=true;C.$("container").bind("mousemove click",t.showAll)},removeEvent:function(){t.bound=false;C.$("container").unbind("mousemove click",t.showAll)},addTimer:function(){g.addTimer("idle",function(){C._idle.hide()},C._options.idle_time)},hide:function(){C.trigger(Galleria.IDLE_ENTER);f.each(t.trunk,function(E,F){var G=F.data("idle");if(!G){return}F.data("idle").complete=false;F.stop().animate(G.to,{duration:600,queue:false,easing:"swing"})})},showAll:function(){g.clearTimer("idle");f.each(C._idle.trunk,function(E,F){C._idle.show(F)})},show:function(E){var F=E.data("idle");if(!F.busy&&!F.complete){F.busy=true;C.trigger(Galleria.IDLE_EXIT);g.clearTimer("idle");E.stop().animate(F.from,{duration:300,queue:false,easing:"swing",complete:function(){f(this).data("idle").busy=false;f(this).data("idle").complete=true}})}t.addTimer()}};var s=this._lightbox={width:0,height:0,initialized:false,active:null,image:null,elems:{},init:function(){C.trigger(Galleria.LIGHTBOX_OPEN);if(s.initialized){return}s.initialized=true;var E="overlay box content shadow title info close prevholder prev nextholder next counter image",H={},J=C._options,F="",I={overlay:"position:fixed;display:none;opacity:"+J.overlay_opacity+";top:0;left:0;width:100%;height:100%;background:"+J.overlay_background+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:"position:absolute;background:#000;width:100%;height:100%;",content:"position:absolute;background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:"position:absolute;bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:"position:absolute;top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:"position:absolute;top:10px;left:10px;right:10px;bottom:30px;overflow:hidden",prevholder:"position:absolute;width:50%;height:100%;cursor:pointer",nextholder:"position:absolute;width:50%;height:100%;right:0;cursor:pointer",prev:"position:absolute;top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;line-height:40px;text-align:center;color:#000",next:"position:absolute;top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;line-height:40px;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px"},G=function(K){return K.hover(function(){f(this).css("color","#bbb")},function(){f(this).css("color","#444")})};f.each(I,function(K,L){F+=".galleria-lightbox-"+K+"{"+L+"}"});g.insertStyleTag(F);f.each(E.split(" "),function(K,L){C.addElement("lightbox-"+L);H[L]=s.elems[L]=C.get("lightbox-"+L)});s.image=new Galleria.Picture();C.append({"lightbox-box":["lightbox-shadow","lightbox-content","lightbox-close","lightbox-prevholder","lightbox-nextholder"],"lightbox-info":["lightbox-title","lightbox-counter"],"lightbox-content":["lightbox-info","lightbox-image"],"lightbox-prevholder":"lightbox-prev","lightbox-nextholder":"lightbox-next"});f(H.image).append(s.image.container);f(r().body).append(H.overlay,H.box);G(f(H.close).bind(n(),s.hide).html("&#215;"));f.each(["Prev","Next"],function(M,K){var L=f(H[K.toLowerCase()]).html(/v/.test(K)?"&nbsp;":"&nbsp;");f(H[K.toLowerCase()+"holder"]).hover(function(){L.show()},function(){L.fadeOut(200)}).bind(n(),function(){s["show"+K]()})});f(H.overlay).bind(n(),s.hide)},rescale:function(I){var H=Math.min(f(l).width()-40,s.width),E=Math.min(f(l).height()-60,s.height),G=Math.min(H/s.width,E/s.height),F=(s.width*G)+40,K=(s.height*G)+60,J={width:F,height:K,marginTop:Math.ceil(K/2)*-1,marginLeft:Math.ceil(F/2)*-1};if(I){f(s.elems.box).css(J)}else{f(s.elems.box).animate(J,C._options.lightbox_transition_speed,C._options.easing,function(){var M=s.image,L=C._options.lightbox_fade_speed;C.trigger({type:Galleria.LIGHTBOX_IMAGE,imageTarget:M.image});M.show();g.show(M.image,L);g.show(s.elems.info,L)})}},hide:function(){s.image.image=null;f(l).unbind("resize",s.rescale);f(s.elems.box).hide();g.hide(s.elems.info);g.hide(s.elems.overlay,200,function(){f(this).hide().css("opacity",C._options.overlay_opacity);C.trigger(Galleria.LIGHTBOX_CLOSE)})},showNext:function(){s.show(C.getNext(s.active))},showPrev:function(){s.show(C.getPrev(s.active))},show:function(E){s.active=E=typeof E=="number"?E:C.getIndex();if(!s.initialized){s.init()}f(l).unbind("resize",s.rescale);var G=C.getData(E),F=C.getDataLength();g.hide(s.elems.info);s.image.load(G.image,function(H){s.width=H.original.width;s.height=H.original.height;f(H.image).css({width:"100.5%",height:"100.5%",top:0,zIndex:99998,opacity:0});s.elems.title.innerHTML=G.title;s.elems.counter.innerHTML=(E+1)+" / "+F;f(l).resize(s.rescale);s.rescale()});f(s.elems.overlay).show();f(s.elems.box).show()}};return this};Galleria.prototype={constructor:Galleria,init:function(u,t){var s=this;a.push(this);this._original={target:u,options:t,data:null};this._target=this._dom.target=u.nodeName?u:f(u).get(0);if(!this._target){Galleria.raise("Target not found.");return}this._options={autoplay:false,carousel:true,carousel_follow:true,carousel_speed:400,carousel_steps:"auto",clicknext:false,data_config:function(v){return{}},data_selector:"img",data_source:this._target,debug:c,easing:"galleria",extend:function(v){},height:"auto",idle_time:3000,image_crop:false,image_margin:0,image_pan:false,image_pan_smoothness:12,image_position:"50%",keep_source:false,lightbox_fade_speed:200,lightbox_transition_speed:500,link_source_images:true,max_scale_ratio:c,min_scale_ratio:c,on_image:function(w,v){},overlay_opacity:0.85,overlay_background:"#0b0b0b",pause_on_interaction:true,popup_links:false,preload:2,queue:true,show:0,show_info:true,show_counter:true,show_imagenav:true,thumb_crop:true,thumb_event_type:n(),thumb_fit:true,thumb_margin:0,thumb_quality:"auto",thumbnails:true,transition:"fade",transition_initial:c,transition_speed:400,width:"auto"};if(t&&t.debug===true){p=true}f(this._target).children().hide();if(Galleria.theme){this._init()}else{g.addTimer("themeload",function(){Galleria.raise("No theme found.",true)},2000);e.one(Galleria.THEMELOAD,function(){g.clearTimer("themeload");s._init.call(s)})}},_init:function(){var s=this;if(this._initialized){Galleria.raise("Init failed: Gallery instance already initialized.");return this}this._initialized=true;if(!Galleria.theme){Galleria.raise("Init failed: No theme found.");return this}f.extend(true,this._options,Galleria.theme.defaults,this._original.options);this.bind(Galleria.DATA,function(){this._original.data=this._data;this.get("total").innerHTML=this.getDataLength();var w=this.$("container");var v={width:0,height:0};var u=g.create("galleria-image");g.wait({until:function(){f.each(["width","height"],function(B,A){if(s._options[A]&&typeof s._options[A]=="number"){v[A]=s._options[A]}else{v[A]=g.parseValue(w.css(A))||g.parseValue(s.$("target").css(A))||w[A]()||s.$("target")[A]()}});var z=function(){return true};if(s._options.thumbnails){s.$("thumbnails").append(u);z=function(){return !!f(u).height()}}return z()&&v.width&&v.height>50},success:function(){f(u).remove();w.width(v.width);w.height(v.height);if(Galleria.WEBKIT){l.setTimeout(function(){s._run()},1)}else{s._run()}},error:function(){Galleria.raise("Width & Height not found.",true)},timeout:2000})});var t=false;this.bind(Galleria.READY,function(){g.show(this.get("counter"));if(this._options.clicknext){f.each(this._data,function(u,v){delete v.link});this.$("stage").css({cursor:"pointer"}).bind(n(),function(u){s.next()})}if(this._options.carousel){this._carousel.bindControls()}if(this._options.autoplay){this.pause();if(typeof this._options.autoplay=="number"){this._playtime=this._options.autoplay}this.trigger(Galleria.PLAY);this._playing=true}if(t){if(typeof this._options.show=="number"){this.show(this._options.show)}return}t=true;if(Galleria.History){Galleria.History.change(function(u){var v=parseInt(u.value.replace(/\//,""));if(isNaN(v)){l.history.go(-1)}else{s.show(v,c,true)}})}Galleria.theme.init.call(this,this._options);this._options.extend.call(this,this._options);if(/^[0-9]{1,4}$/.test(d)&&Galleria.History){this.show(d,c,true)}else{this.show(this._options.show)}});this.append({"info-text":["info-title","info-description","info-author"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]});g.hide(this.$("counter").append(this.get("current")," / ",this.get("total")));this.setCounter("&#8211;");f.each(new Array(2),function(u){var v=new Galleria.Picture();f(v.container).css({position:"absolute",top:0,left:0});s.$("images").append(v.container);s._controls[u]=v});this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"});this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"});this.$("image-nav-right, image-nav-left").bind(n(),function(v){if(s._options.clicknext){v.stopPropagation()}if(s._options.pause_on_interaction){s.pause()}var u=/right/.test(this.className)?"next":"prev";s[u]()});f.each(["info","counter","image-nav"],function(u,v){if(s._options["show_"+v.replace(/-/,"")]===false){g.moveOut(s.get(v))}});this.load();if(!this._options.keep_source&&!h){this._target.innerHTML=""}this.$("target").append(this.get("container"));if(this._options.carousel){this.bind(Galleria.THUMBNAIL,function(){this.updateCarousel()})}this.bind(Galleria.IMAGE,function(u){this._options.on_image.call(this,u.imageTarget,u.thumbTarget)});return this},_run:function(){var E=this,v=this._options,u=0,C=0,w=typeof v.thumbnails=="string"?v.thumbnails.toLowerCase():null;for(var A=0;this._data[A];A++){var t,z=this._data[A],D;if(v.thumbnails===true){t=new Galleria.Picture(A);var s=z.thumb||z.image;this.$("thumbnails").append(t.container);D=f(t.container);var B=function(F){return q.defaultView&&q.defaultView.getComputedStyle?q.defaultView.getComputedStyle(t.container,null)[F]:D.css(F)};t.data={width:g.parseValue(B("width")),height:g.parseValue(B("height")),order:A};D.css((v.thumb_fit&&v.thumb_crop!==true)?{width:0,height:0}:{width:t.data.width,height:t.data.height});t.load(s,function(F){F.scale({width:F.data.width,height:F.data.height,crop:v.thumb_crop,margin:v.thumb_margin,complete:function(H){var I=["left","top"];var G=["Width","Height"];f.each(G,function(L,M){var J=M.toLowerCase();if((v.thumb_crop!==true||v.thumb_crop==J)&&v.thumb_fit){var K={};K[J]=H[J];f(H.container).css(K);K={};K[I[L]]=0;f(H.image).css(K)}H["outer"+M]=f(H.container)["outer"+M](true)});g.toggleQuality(H.image,v.thumb_quality===true||(v.thumb_quality=="auto"&&H.original.width<H.width*3));E.trigger({type:Galleria.THUMBNAIL,thumbTarget:H.image,index:H.data.order})}})});if(v.preload=="all"){t.add(z.image)}}else{if(w=="empty"||w=="numbers"){t={container:g.create("galleria-image"),image:g.create("img","span"),ready:true};if(w=="numbers"){f(t.image).text(A+1)}this.$("thumbnails").append(t.container);l.setTimeout((function(H,G,F){return function(){f(F).append(H);E.trigger({type:Galleria.THUMBNAIL,thumbTarget:H,index:G})}})(t.image,A,t.container),50+(A*20))}else{t={container:null,image:null}}}f(t.container).add(v.keep_source&&v.link_source_images?z.original:null).data("index",A).bind(v.thumb_event_type,function(G){if(v.pause_on_interaction){E.pause()}var F=f(G.currentTarget).data("index");if(E.getIndex()!==F){E.show(F)}G.preventDefault()});this._thumbnails.push(t)}g.wait({until:function(){E._stageWidth=E.$("stage").width();E._stageHeight=E.$("stage").height();return(E._stageWidth&&E._stageHeight>50)},success:function(){E.trigger(Galleria.READY)},error:function(){Galleria.raise("stage meassures not found")}})},load:function(v,s,u){var t=this;this._data=[];this._thumbnails=[];this.$("thumbnails").empty();if(typeof s=="function"){u=s;s=null}v=v||this._options.data_source;s=s||this._options.data_selector;u=u||this._options.data_config;if(v.constructor==Array){if(this.validate(v)){this._data=v;this.trigger(Galleria.DATA)}else{Galleria.raise("Load failed: JSON Array not valid.")}return this}f(v).find(s).each(function(A,z){var C={},z=f(z),B=z.parent(),w=B.attr("href");if(/\.(png|gif|jpg|jpeg)$/i.test(w)){C.image=w}else{if(w){C.link=w}}t._data.push(f.extend({title:z.attr("title"),thumb:z.attr("src"),image:z.attr("src"),description:z.attr("alt"),link:z.attr("longdesc"),original:z.get(0)},C,u(z)))});if(this.getDataLength()){this.trigger(Galleria.DATA)}else{Galleria.raise("Load failed: no data found.")}return this},_getActive:function(){return this._controls.getActive()},validate:function(s){return true},bind:function(t,s){this.$("container").bind(t,this.proxy(s));return this},unbind:function(s){this.$("container").unbind(s);return this},trigger:function(s){s=typeof s=="object"?f.extend(s,{scope:this}):{type:s,scope:this};this.$("container").trigger(s);return this},addIdleState:function(t,s){this._idle.add.apply(this._idle,g.array(arguments));return this},removeIdleState:function(s){this._idle.remove.apply(this._idle,g.array(arguments));return this},enterIdleMode:function(){this._idle.hide();return this},exitIdleMode:function(){this.idle._show();return this},enterFullscreen:function(s){this._fullscreen.enter.apply(this,g.array(arguments));return this},exitFullscreen:function(s){this._fullscreen.exit.apply(this,g.array(arguments));return this},bindTooltip:function(s,t){this._tooltip.bind.apply(this._tooltip,g.array(arguments));return this},defineTooltip:function(s,t){this._tooltip.define.apply(this._tooltip,g.array(arguments));return this},refreshTooltip:function(){this._tooltip.show.apply(this._tooltip,g.array(arguments));return this},openLightbox:function(){this._lightbox.show.apply(this._lightbox,g.array(arguments));return this},closeLightbox:function(){this._lightbox.hide.apply(this._lightbox,g.array(arguments));return this},getActiveImage:function(){return this._getActive().image||c},getActiveThumb:function(){return this._thumbnails[this._active].image||c},getMousePosition:function(s){return{x:s.pageX-this.$("container").offset().left,y:s.pageY-this.$("container").offset().top}},addPan:function(A){if(this._options.image_crop===false){return}A=f(A||this.getActiveImage());var I=this,H=A.width()/2,F=A.height()/2,u=destX=parseInt(A.css("left"))||0,t=destY=parseInt(A.css("top"))||0,G=0,E=0,w=false,D=g.timestamp(),s=0,v=0,C=function(L,K,M){if(L>0){v=Math.round(Math.max(L*-1,Math.min(0,K)));if(s!=v){s=v;if(h==8){A.parent()["scroll"+M](v*-1)}else{var J={};J[M.toLowerCase()]=v;A.css(J)}}}},z=function(J){if(g.timestamp()-D<50){return}w=true;H=I.getMousePosition(J).x;F=I.getMousePosition(J).y},B=function(J){if(!w){return}G=A.width()-I._stageWidth;E=A.height()-I._stageHeight;destX=H/I._stageWidth*G*-1;destY=F/I._stageHeight*E*-1;u+=(destX-u)/I._options.image_pan_smoothness;t+=(destY-t)/I._options.image_pan_smoothness;C(E,t,"Top");C(G,u,"Left")};if(h==8){A.parent().scrollTop(t*-1).scrollLeft(u*-1);A.css({top:0,left:0})}this.$("stage").unbind("mousemove",z).bind("mousemove",z);g.addTimer("pan",B,50,true);return this},proxy:function(t,s){if(typeof t!=="function"){return function(){}}s=s||this;return function(){return t.apply(s,g.array(arguments))}},removePan:function(){if(h==8){}this.$("stage").unbind("mousemove");g.clearTimer("pan");return this},addElement:function(t){var s=this._dom;f.each(g.array(arguments),function(v,u){s[u]=g.create("galleria-"+u)});return this},attachKeyboard:function(s){this._keyboard.attach.apply(this._keyboard,g.array(arguments));return this},detachKeyboard:function(){this._keyboard.detach.apply(this._keyboard,g.array(arguments));return this},appendChild:function(t,s){this.$(t).append(this.get(s)||s);return this},prependChild:function(t,s){this.$(t).prepend(this.get(s)||s);return this},remove:function(s){this.$(g.array(arguments).join(",")).remove();return this},append:function(u){for(var t in u){if(u[t].constructor==Array){for(var s=0;u[t][s];s++){this.appendChild(t,u[t][s])}}else{this.appendChild(t,u[t])}}return this},_scaleImage:function(t,s){s=f.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.image_crop,max:this._options.max_scale_ratio,min:this._options.min_scale_ratio,margin:this._options.image_margin,position:this._options.image_position},s);(t||this._controls.getActive()).scale(s);return this},updateCarousel:function(){this._carousel.update();return this},rescale:function(v,s,t){var u=this;if(typeof v=="function"){t=v;v=c}var w=function(){var z=u._options;u._stageWidth=v||u.$("stage").width();u._stageHeight=s||u.$("stage").height();u._scaleImage();if(u._options.carousel){u.updateCarousel()}u.trigger(Galleria.RESCALE);if(typeof t=="function"){t.call(u)}};if(Galleria.WEBKIT&&!v&&!s){g.addTimer("scale",w,5)}else{w.call(u)}return this},refreshImage:function(){this._scaleImage();if(this._options.image_pan){this.addPan()}return this},show:function(t,s,u){if(t===false||!this._options.queue&&this._queue.stalled){return}t=Math.max(0,Math.min(parseInt(t),this.getDataLength()-1));s=typeof s!="undefined"?!!s:t<this.getIndex();u=u||false;if(!u&&Galleria.History){Galleria.History.value(t.toString());return}this._active=t;Array.prototype.push.call(this._queue,{index:t,rewind:s});if(!this._queue.stalled){this._show()}return this},_show:function(){var G=this,E=this._queue[0],C=this.getData(E.index);if(!C){return}var s=C.image,A=this._controls.getActive(),D=this._controls.getNext(),z=D.isCached(s),t=this._thumbnails[E.index];var v=function(){G._queue.stalled=false;g.toggleQuality(D.image,G._options.image_quality);f(A.container).css({zIndex:0,opacity:0});f(D.container).css({zIndex:1,opacity:1});G._controls.swap();if(G._options.image_pan){G.addPan(D.image)}if(C.link){f(D.image).css({cursor:"pointer"}).bind(n(),function(){if(G._options.popup_links){var H=l.open(C.link,"_blank")}else{l.location.href=C.link}})}Array.prototype.shift.call(G._queue);if(G._queue.length){G._show()}G._playCheck();G.trigger({type:Galleria.IMAGE,index:E.index,imageTarget:D.image,thumbTarget:t.image})};if(this._options.carousel&&this._options.carousel_follow){this._carousel.follow(E.index)}if(this._options.preload){var u,w=this.getNext();try{for(var B=this._options.preload;B>0;B--){u=new Galleria.Picture();u.add(G.getData(w).image);w=G.getNext(w)}}catch(F){}}g.show(D.container);f(G._thumbnails[E.index].container).addClass("active").siblings(".active").removeClass("active");G.trigger({type:Galleria.LOADSTART,cached:z,index:E.index,imageTarget:D.image,thumbTarget:t.image});D.load(s,function(H){G._scaleImage(H,{complete:function(I){g.show(I.container);if("image" in A){g.toggleQuality(A.image,false)}g.toggleQuality(I.image,false);G._queue.stalled=true;G.removePan();G.setInfo(E.index);G.setCounter(E.index);G.trigger({type:Galleria.LOADFINISH,cached:z,index:E.index,imageTarget:I.image,thumbTarget:G._thumbnails[E.index].image});var K=A.image===null&&G._options.transition_initial?G._options.transition_initial:G._options.transition;if(K in o===false){v()}else{var J={prev:A.image,next:I.image,rewind:E.rewind,speed:G._options.transition_speed||400};o[K].call(G,J,v)}}})})},getNext:function(s){s=typeof s=="number"?s:this.getIndex();return s==this.getDataLength()-1?0:s+1},getPrev:function(s){s=typeof s=="number"?s:this.getIndex();return s===0?this.getDataLength()-1:s-1},next:function(){if(this.getDataLength()>1){this.show(this.getNext(),false)}return this},prev:function(){if(this.getDataLength()>1){this.show(this.getPrev(),true)}return this},get:function(s){return s in this._dom?this._dom[s]:null},getData:function(s){return s in this._data?this._data[s]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active==="number"?this._active:false},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(s){return typeof s=="undefined"?this._options:this._options[s]},setOptions:function(s,t){if(typeof s=="object"){f.extend(this._options,s)}else{this._options[s]=t}return this},play:function(s){this._playing=true;this._playtime=s||this._playtime;this._playCheck();this.trigger(Galleria.PLAY);return this},pause:function(){this._playing=false;this.trigger(Galleria.PAUSE);return this},playToggle:function(s){return(this._playing)?this.pause():this.play(s)},isPlaying:function(){return this._playing},_playCheck:function(){var t=this,w=0,s=20,u=g.timestamp();if(this._playing){g.clearTimer("play");var v=function(){w=g.timestamp()-u;if(w>=t._playtime&&t._playing){g.clearTimer("play");t.next();return}if(t._playing){t.trigger({type:Galleria.PROGRESS,percent:Math.ceil(w/t._playtime*100),seconds:Math.floor(w/1000),milliseconds:w});g.addTimer("play",v,s)}};g.addTimer("play",v,s)}},setIndex:function(s){this._active=s;return this},setCounter:function(t){if(typeof t=="number"){t++}else{if(typeof t=="undefined"){t=this.getIndex()+1}}this.get("current").innerHTML=t;if(h==8){var s=this.$("counter").css("opacity");this.$("counter").css("opacity",s)}return this},setInfo:function(t){var s=this,u=this.getData(t);f.each(["title","description","author"],function(v,w){var z=s.$("info-"+w);if(!!u[w]){z[u[w].length?"show":"hide"]().html(u[w])}else{z.empty().hide()}});return this},hasInfo:function(t){var v=this.getData(t);var s="title description".split(" ");for(var u=0;s[u];u++){if(!!this.getData(t)[s[u]]){return true}}return false},jQuery:function(v){var s=this,t=[];f.each(v.split(","),function(w,z){z=f.trim(z);if(s.get(z)){t.push(z)}});var u=f(s.get(t.shift()));f.each(t,function(w,z){u=u.add(s.get(z))});return u},$:function(){return this.jQuery.apply(this,g.array(arguments))}};f.extend(Galleria,{DATA:"g_data",READY:"g_ready",THUMBNAIL:"g_thumbnail",LOADSTART:"g_loadstart",LOADFINISH:"g_loadfinish",IMAGE:"g_image",THEMELOAD:"g_themeload",PLAY:"g_play",PAUSE:"g_pause",PROGRESS:"g_progress",FULLSCREEN_ENTER:"g_fullscreen_enter",FULLSCREEN_EXIT:"g_fullscreen_exit",IDLE_ENTER:"g_idle_enter",IDLE_EXIT:"g_idle_exit",RESCALE:"g_rescale",LIGHTBOX_OPEN:"g_lightbox_open",LIGHTBOX_CLOSE:"g_lightbox_close",LIGHTBOX_IMAGE:"g_lightbox_image",IE9:h==9,IE8:h==8,IE7:h==7,IE6:h==6,IE:!!h,WEBKIT:/webkit/.test(m),SAFARI:/safari/.test(m),CHROME:/chrome/.test(m),QUIRK:(h&&q.compatMode&&q.compatMode=="BackCompat"),MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!l.opera,IPHONE:/iphone/.test(m),IPAD:/ipad/.test(m),ANDROID:/android/.test(m),TOUCH:!!(/iphone/.test(m)||/ipad/.test(m)||/android/.test(m))});Galleria.addTheme=function(t){if(!!t.name===false){Galleria.raise("No theme name specified")}if(typeof t.defaults!="object"){t.defaults={}}if(typeof t.css=="string"){var s;f("script").each(function(v,u){var w=new RegExp("galleria\\."+t.name.toLowerCase()+"\\.");if(w.test(u.src)){s=u.src.replace(/[^\/]*$/,"")+t.css;g.addTimer("css",function(){g.loadCSS(s,"galleria-theme",function(){Galleria.theme=t;e.trigger(Galleria.THEMELOAD)})},1)}});if(!s){Galleria.raise("No theme CSS loaded")}}else{Galleria.theme=t;e.trigger(Galleria.THEMELOAD)}return t};Galleria.loadTheme=function(v,t){var s=false,u=a.length;Galleria.theme=c;g.loadScript(v,function(){s=true});g.wait({until:function(){return s},error:function(){Galleria.raise("Theme at "+v+" could not load, check theme path.",true)},success:function(){if(u){var w=[];f.each(Galleria.get(),function(A,z){var C=f.extend(z._original.options,{data_source:z._data},t);z.$("container").remove();var B=new Galleria();B._id=z._id;B.init(z._original.target,C);w.push(B)});a=w}},timeout:2000})};Galleria.get=function(s){if(!!a[s]){return a[s]}else{if(typeof s!=="number"){return a}else{Galleria.raise("Gallery index "+s+" not found")}}};Galleria.addTransition=function(s,t){o[s]=t};Galleria.utils=g;Galleria.log=function(){try{l.console.log.apply(l.console,g.array(arguments))}catch(s){try{opera.postError.apply(opera,arguments)}catch(t){alert(g.array(arguments).split(", "))}}};Galleria.raise=function(u,t){if(p||t){var s=t?"Fatal error":"Error";throw new Error(s+": "+u)}};Galleria.Picture=function(s){this.id=s||null;this.image=null;this.container=g.create("galleria-image");f(this.container).css({overflow:"hidden",position:"relative"});this.original={width:0,height:0};this.ready=false;this.loaded=false};Galleria.Picture.prototype={cache:{},add:function(u){var s=this;var t=new Image();f(t).css("display","block");if(s.cache[u]){t.src=u;s.loaded=true;s.original={height:t.height,width:t.width};return t}t.onload=function(){s.original={height:this.height,width:this.width};s.cache[u]=u;s.loaded=true};t.src=u;return t},show:function(){g.show(this.image)},hide:function(){g.moveOut(this.image)},clear:function(){this.image=null},isCached:function(s){return !!this.cache[s]},load:function(t,u){var s=this;f(this.container).empty(true);this.image=this.add(t);g.hide(this.image);f(this.container).append(this.image);g.wait({until:function(){return s.loaded&&s.image.complete&&s.image.width},success:function(){l.setTimeout(function(){u.call(s,s)},50)},error:function(){l.setTimeout(function(){u.call(s,s)},50);Galleria.raise("image not loaded in 10 seconds: "+t)},timeout:10000});return this.container},scale:function(u){u=f.extend({width:0,height:0,min:c,max:c,margin:0,complete:function(){},position:"center",crop:false},u);if(!this.image){return this.container}var v,s,t=this,w=f(t.container);g.wait({until:function(){v=u.width||w.width()||g.parseValue(w.css("width"));s=u.height||w.height()||g.parseValue(w.css("height"));return v&&s},success:function(){var D=(v-u.margin*2)/t.original.width,z=(s-u.margin*2)/t.original.height,F={"true":Math.max(D,z),width:D,height:z,"false":Math.min(D,z)},B=F[u.crop.toString()];if(u.max){B=Math.min(u.max,B)}if(u.min){B=Math.max(u.min,B)}f(t.container).width(v).height(s);f.each(["width","height"],function(I,H){f(t.image)[H](t[H]=Math.ceil(t.original[H]*B))});var G={},A={},C=function(J,K,I){var H=0;if(/\%/.test(J)){var L=parseInt(J)/100;H=Math.ceil(f(t.image)[K]()*-1*L+I*L)}else{H=g.parseValue(J)}return H},E={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};f.each(u.position.toLowerCase().split(" "),function(H,I){if(I=="center"){I="50%"}G[H?"top":"left"]=I});f.each(G,function(H,I){if(E.hasOwnProperty(I)){f.extend(A,E[I])}});G=G.top?f.extend(G,A):A;G=f.extend({top:"50%",left:"50%"},G);f(t.image).css({position:"relative",width:"100%",top:C(G.top,"height",s)-u.margin,left:C(G.left,"width",v)-u.margin});t.show();t.ready=true;u.complete.call(t,t)},error:function(){Galleria.raise("Could not scale image: "+t.image.src)},timeout:1000});return this}};f.extend(f.easing,{galleria:function(u,v,s,z,w){if((v/=w/2)<1){return z/2*v*v*v*v+s}return -z/2*((v-=2)*v*v*v-2)+s},galleriaIn:function(u,v,s,z,w){return z*(v/=w)*v*v*v+s},galleriaOut:function(u,v,s,z,w){return -z*((v=v/w-1)*v*v*v-1)+s}});f.fn.galleria=function(s){return this.each(function(){var t=new Galleria();t.init(this,s)})};l.Galleria=Galleria})(jQuery);